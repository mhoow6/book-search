<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    label {
        display: block;
        font: 1rem 'Fira Sans', sans-serif;
    }

    input,
    label {
        margin: .4rem 0;
    }
</style>

<body>
    <label for="book-search">Search the book:</label>
    <input type="search" id="search-text">
    <button id="book-search">Search</button>
    <label>책의 정보:</label>
    <ul>
        <li id="book-thumbnail"></li>
        <li id="book-title"></li>
        <li id="book-author"></li>
        <li id="book-sale_price"></li>
    </ul>

    <script>
        document.getElementById('book-search').addEventListener('click', function (event) {
            var xhr = new XMLHttpRequest();
            var url = "https://dapi.kakao.com/v3/search/book?target=title"
            var search = document.getElementById('search-text').value;
            var apikey = 'KakaoAK 357576fc652c16fd2a1a766b9e5ac3f1';

            xhr.onreadystatechange = function () {
                if (xhr.readyState === xhr.DONE && xhr.status === 200) {
                    var result = JSON.parse(xhr.responseText);
                    console.log(result);

                    // book thumbnail
                    var li_book_thumbnail = document.getElementById('book-thumbnail');
                    var img = document.createElement('img');
                    img.setAttribute('src', result["documents"][0]["thumbnail"]);
                    li_book_thumbnail.appendChild(img);

                    // book author
                    var li_book_author = document.getElementById('book-author');
                    var text_book_author = document.createTextNode(result["documents"][0]["authors"]);
                    li_book_author.appendChild(text_book_author);

                    // book title
                    var li_book_title = document.getElementById('book-title');
                    var text_book_title = document.createTextNode(result["documents"][0]["title"]);
                    li_book_title.appendChild(text_book_title);

                    // book sale_price
                    var li_book_sale_price = document.getElementById('book-sale_price');
                    var text_book_sale_price = document.createTextNode(result["documents"][0]["sale_price"]);
                    li_book_sale_price.appendChild(text_book_sale_price); 
                }
            }

            xhr.open('GET', url + '&query=' + search);
            xhr.setRequestHeader("Authorization", apikey)
            xhr.send();
            
        }); 
    </script>

</body>

</html>